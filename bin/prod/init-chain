#!/bin/sh

# This script is used to initialize the chain

# The following environment variables are required:
APP_NAME=${APP_NAME:-"chain"}
BIN_NAME=${BIN_NAME:-"chaind"}
DENOM=${DENOM:-"u$(echo ${APP_NAME} | head -c 4)"}


if ${BIN_NAME} version --long | grep 'cosmos_sdk_version: v0.47'; then
    ADD_INIT_FLAGS="--default-denom=${DENOM}"
else
    ADD_INIT_FLAGS=""
fi

echo "Initializing chain ${CHAIN_NAME}..."

# initialize the chain
${BIN_NAME} init moniker --chain-id=${CHAIN_NAME} \
${ADD_INIT_FLAGS} > /dev/null 2>&1